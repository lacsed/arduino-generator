
<!DOCTYPE HTML>
<HTML>
<HEAD>
    <TITLE>Automato 5</TITLE>
    <script src="https://github.com/mdaines/viz.js/releases/download/v1.8.0/viz.js"></script>
</HEAD>
<BODY>
    <script type="text/vnd.graphviz" id="cluster">
digraph {
rankdir=TB;
node [shape = doublecircle]; "s0" 
node [shape = circle]; "s1"  "s2" 
node [shape = point ]; Initial
Initial -> "s0";
"s0" -> "s1" [ label = "5" ];
"s0" -> "s2" [ label = "7" ];
"s1" -> "s0" [ label = "6" ];
"s2" -> "s0" [ label = "8" ];
}
    </script>
        <div style="height: 50px; width: 100%;">
            <button type = "button" onclick = "downloadSVG('Automato 5.svg')" > Save as SVG</button>
            <button type = "button" onclick = "downloadPNG('Automato 5.png')" > Save as PNG</button>
        </div>
         
    <script>
        function example(id) {
                var result;
            try {
                let src = document.getElementById(id).innerHTML;
                result = Viz(src, { format: 'svg', engine: 'dot', scale: undefined, totalMemory: 1024*1024*1024, files: undefined, images: undefined });               
                
                return result;
            } 
            catch(e) {
                console.log(e);
            }
        }

        function downloadSVG(fileName) {
            var content = example('cluster');
            var a = document.createElement('a');
            var file = new Blob([content], {type: 'text/plain'});
            a.href = URL.createObjectURL(file);
            a.download = fileName;
            a.click();
        }

        function downloadPNG(fileName) {
            Viz.svgXmlToPngImageElement(example('cluster'), undefined, (err, img) => {
                    const source = img.src;
                    const a = document.createElement('a');
                    document.body.appendChild(a);

                    a.href = source;
                    a.target = '_self';
                    a.download = fileName;
                    a.click();
                }); 
         }

        document.body.innerHTML += example("cluster", "svg");
    </script>
</BODY>
</HTML>

